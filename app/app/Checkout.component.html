<h2>Checkout</h2>

<form #checkoutForm="ngForm"
      (ngSubmit)="checkout(checkoutForm.value)"
      >
  <div class="row">
    <div class="large-4 columns">
      <label>Superhero Name
        <input type="text" 
               placeholder="e.g Superman"
               name="superName"
               [ngModel]="initial.superName"
               required
               #superName="ngForm"
               >
               <!-- WILL BE ngModel -->
      </label>
    </div>
    <div class="large-4 columns">
      <label
        >Real Name
        <input type="text"
               placeholder="e.g Clark Kent"
               name="realName"
               [ngModel]="initial.realName"
               required
               #realName="ngForm"
               >
      </label>
    </div>
    <div class="large-4 columns">
      <label
        >Are you a robot?
        <input type="checkbox"
               name="captcha"
               [ngModel]="initial.captcha"
               >
      </label>
    </div>
  </div>
  <div class="row">
    <div class="large-12 columns"
      >
      <label>
        Super-card number (all super-banks accepted)
        <input type="text"
               placeholder="e.g 4444 4444 4444 4444" 
               pattern='\d{4,16}'
               name=cardNumber
               required
               ngModel
               #card="ngForm"
               >
      </label>
      <small class='callout warning error'
             [hidden]="!card.errors?.pattern"
             >
        Please enter a valid card (16 digits, e.g 4444 4444 4444 4444)
      </small>
    </div>
  </div>
  <div class="row">
  </div>
  <div class="row">
    <div class="small-8 columns">
      <p class='callout'
         >
      </p>
    </div>
    <div class="small-offset-8 small-4 columns">
      <button class='button'
              [disabled]="!checkoutForm.valid"
              >
        Checkout
      </button>
    </div>
  </div>

  <div *ngIf="transaction.state === 'loading'"
       class="callout"
       >
    Checking your order
  </div>

  <div *ngIf="transaction.state === 'success'"
       class="callout success"
       >
    Your order was accepted and is being processed!
  </div>

  <div class="callout warning"
       *ngIf="transaction.state === 'error'"
       >
     Bad news I'm afraid
  </div>

</form>
