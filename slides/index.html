<!DOCTYPE html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Angular 2 class</title>
  
  <link rel="stylesheet" href="reveal/css/reveal.min.css">
  <link rel="stylesheet" href="reveal/lib/css/googlecode.css">

  <link rel="stylesheet" href="slides-theme/style.css">
  <link rel="stylesheet" href="slides-theme/talk-specific.css">

  <!-- demos -->

  <!-- for live coding -->
  <link rel="stylesheet" href="js/little-console.css" id="theme">

  <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-24335480-1']);
  _gaq.push(['_trackPageview']);

  var asyncScript = function(src) {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = src;
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  };

  asyncScript(('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js');
  </script>

  <script src="js/revealHooks.js"></script>

</head>

<body>

  <div class="reveal">
    <div class="slides">
<section  class="front"><h2 id="angular-2">Angular 2</h2>
<ul>
<li>github.com/timruffles/angular-2-class
<a href="https://truffles.me.uk">@timruffles</a></li>
</ul>
</section>

<section  class=""><h2 id="code">Code</h2>
<ul>
<li>github.com/timruffles/angular-2-class</li>
</ul>
</section>

<section  class=""><h2 id="today">Today</h2>
<ul>
<li>the core of building an Angular app</li>
</ul>
</section>

<section  class=""><h2 id="questions">Questions</h2>
<ul>
<li>please ask them! :)</li>
</ul>
</section>

<section  class=""><h2 id="exercise-driven">Exercise driven</h2>
</section>

<section  class=""><h2 id="can-you-read-the-docs-">Can you read the docs?</h2>
</section>

<section  class=""><h2 id="yes-">Yes!</h2>
</section>

<section  class=""><h2 id="reading-docs-programming-">Reading docs = programming! :)</h2>
<ul>
<li><a href="https://angular.io/">angular.io</a></li>
<li><a href="https://angular.io/docs/ts/latest/cheatsheet.html">Angular 2 cheatsheet</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript">MDN Javascript</a> - Browser DOM - HTML, CSS</li>
<li><a href="http://foundation.zurb.com/sites/docs/">Foundation 6 sites</a> for styling </li>
</ul>
</section>

<section  class=""><h2 id="can-you-have-the-slides-">Can you have the slides?</h2>
</section>

<section  class=""><h2 id="yes-">Yes!</h2>
<ul>
<li>repo/slides/index.html</li>
</ul>
</section>

<section  class=""><h2 id="should-you-help-each-other-">Should you help each other?</h2>
</section>

<section  class=""><h2 id="yes-">Yes!</h2>
</section>

<section  class=""><h2 id="if-you-finish-early-explain-to-others">If you finish early, explain to others</h2>
<ul>
<li>teaching will really test your knowledge</li>
</ul>
</section>

<section  class=""><h2 id="is-asking-for-help-a-good-idea-">Is asking for help a good idea?</h2>
</section>

<section  class=""><h2 id="yes-">Yes :)</h2>
<ul>
<li>you can always check API docs at home</li>
<li>big questions/doubts are good to ask while I&#39;m in the room</li>
</ul>
</section>

<section  class=""><h2 id="are-the-exercises-puzzles-">Are the exercises puzzles?</h2>
</section>

<section  class=""><h2 id="no-">No!</h2>
</section>

<section  class=""><h2 id="if-you-don-t-know-what-to-do-ask">If you don&#39;t know what to do, ask</h2>
<ul>
<li>it&#39;s hard to follow exercises</li>
</ul>
</section>

<section  class=""><h2 id="is-angular-2-finished-">Is Angular 2 finished?</h2>
</section>

<section  class=""><h2 id="no-">No!</h2>
<ul>
<li>release-candidate</li>
<li>stuff still changes</li>
<li>but: big concepts very stable</li>
</ul>
</section>

<section  class=""><h2 id="e-g-a-few-days-ago">e.g a few days ago</h2>
<ul>
<li>:( for me</li>
</ul>
</section>

<section  class=""><h2 id="any-questions-before-we-start-">Any questions before we start?</h2>
</section>

<section data-state='title' class=" title"><h2 id="big-takeaways">Big Takeaways</h2>
</section>

<section  class=""><h2 id="three">Three</h2>
</section>

<section  class=""><h2 id="1-components">1. Components</h2>
</section>

<section  class=""><h2 id="2-dependency-injection">2. Dependency Injection</h2>
</section>

<section  class=""><h2 id="3-data-flow">3. Data-flow</h2>
</section>

<section data-state='title' class=""><h2 id="components">Components</h2>
</section>

<section  class=""><h2 id="our-first-component">Our first component</h2>
</section>

<section  class=""><h2 id="goal">Goal</h2>
<pre><code class="lang-html">&lt;app&gt;
  &lt;h1&gt;Hi there&lt;/h1&gt;
&lt;/app&gt;
</code></pre>
</section>

<section  class=""><h2 id="bit-by-bit">Bit by bit</h2>
</section>

<section data-state='notitle' class=""><h2 id="-"> </h2>
<pre><code class="lang-javascript">import { Component } from &#39;@angular/core&#39;;
</code></pre>
</section>

<section data-state='notitle' class=""><h2 id="-"> </h2>
<pre><code class="lang-javascript">@Component({
  // any CSS selector
  selector: &#39;app&#39;,
  // ...
})
</code></pre>
</section>

<section data-state='notitle' class=""><h2 id="-"> </h2>
<pre><code class="lang-javascript">@Component({
  // ...
  template: &#39;&lt;h1&gt;{{ message }}&lt;/h1&gt;&#39;,
})
</code></pre>
</section>

<section data-state='notitle' class=""><h2 id="-"> </h2>
<pre><code class="lang-javascript">export class AppComponent {
  constructor() { 
    this.message = &quot;Hi there&quot;;
  }
}
</code></pre>
</section>

<section data-state='notitle' class=""><h2 id="-"> </h2>
<pre><code class="lang-javascript">export class AppComponent {
</code></pre>
</section>

<section  class=""><h2 id="all-together">All together</h2>
<pre><code class="lang-javascript">import { Component } from &#39;@angular/core&#39;;

@Component({
  selector: &#39;app&#39;,
  template: &#39;&lt;h1&gt;{{ message }}&lt;/h1&gt;&#39;,
})
export class AppComponent {
  constructor() { 
    this.message = &quot;Hi there&quot;;
  }
}
</code></pre>
</section>

<section  class=""><h2 id="complete-app-">Complete app!</h2>
<pre><code class="lang-javascript">import { AppComponent } from &quot;./AppComponent&quot;;
import { bootstrap } from &quot;@angular/platform-browser-dynamic&quot;;

bootstrap(AppComponent);
</code></pre>
<pre><code class="lang-javascript">&lt;!DOCTYPE html&gt;

&lt;app&gt;&lt;/app&gt;

&lt;!-- bundled up: app + dependencies --&gt;
&lt;script src=&quot;dist/app.js&quot;&gt;&lt;/script&gt;
</code></pre>
</section>

<section  class=""><h2 id="let-s-have-a-go">Let&#39;s have a go</h2>
<pre><code>hello-angular
</code></pre></section>

<section data-state='title' class=" title"><h2 id="template-superpowers">Template superpowers</h2>
</section>

<section  class=""><h2 id="data-binding">Data-binding</h2>
<pre><code class="lang-html">&lt;!-- interpolated - live --&gt;
&lt;div title=&quot;Hello {{ person }}&quot;&gt;

&lt;!-- [] = attribute replaced by expression --&gt;
&lt;div [title]=&quot;getMessage()&quot;&gt;
</code></pre>
</section>

<section  class=""><h2 id="event-handling">Event-handling</h2>
<pre><code class="lang-html">&lt;!-- DOM events --&gt;
&lt;form (submit)=&quot;create($event)&quot;&gt;
</code></pre>
</section>

<section  class=""><h2 id="styling">Styling</h2>
<ul>
<li>watch out: CSS is escaped</li>
</ul>
<pre><code class="lang-html">&lt;a [style.size.em]=&#39;mySize&#39;&gt;
  Link
&lt;/a&gt;
</code></pre>
</section>

<section  class=""><h2 id="toggling-classes">Toggling classes</h2>
<pre><code class="lang-html">&lt;a [class.active]=&#39;isActive(link.id)&#39;&gt;
  {{ link.text }}
&lt;/a&gt;
</code></pre>
</section>

<section  class=""><h2 id="local-variables">Local variables</h2>
<ul>
<li>access nodes in template</li>
</ul>
<pre><code class="lang-html">&lt;video #movieplayer &gt;
  &lt;button (click)=&quot;movieplayer.play()&quot;&gt;
&lt;/video&gt;
</code></pre>
</section>

<section  class=""><h2 id="styling">Styling</h2>
<pre><code class="lang-javascript">@Component({
  styles: [
    `
      a {
        color: red;
      }
    `
  ],
  template: `
    &lt;a&gt;Hi&lt;/a&gt;
  `
})
</code></pre>
</section>

<section  class=""><h2 id="let-s-have-a-go">Let&#39;s have a go</h2>
<pre><code>templates
</code></pre></section>

<section data-state='title' class=" title"><h2 id="typescript">TypeScript</h2>
</section>

<section  class=""><h2 id="es6-">ES6++</h2>
<p><img src="img/typescript-es6.png" alt="typescript es6"></p>
</section>

<section  class=""><h2 id="lots-of-features">Lots of features</h2>
</section>

<section  class=""><h2 id="most-important">Most important</h2>
<ol>
<li>Types</li>
<li>Modules</li>
<li>Classes</li>
</ol>
</section>

<section data-state='title' class=" title"><h2 id="types">Types</h2>
</section>

<section  class=""><h2 id="types">Types</h2>
<pre><code class="lang-typescript">const person : string = &quot;hello&quot;;

function greet(name: string): string {
  return `hi ${name}`;
}

// this will compile
console.log(greet(&quot;hi&quot;));

//  Argument of type &#39;number&#39; is not assignable 
// to parameter of type &#39;string&#39;.
console.log(greet(1));
</code></pre>
</section>

<section  class=""><h2 id="woah-">Woah!</h2>
</section>

<section  class=""><h2 id="bit-by-bit">Bit by bit</h2>
</section>

<section  class=""><h2 id="variables">Variables</h2>
<pre><code class="lang-typescript">// type a var, let, const
const person : string = &quot;hello&quot;;
</code></pre>
</section>

<section  class=""><h2 id="functions">Functions</h2>
<pre><code class="lang-typescript">// type arguments, return values
function greet(name: string): string {
  // ...
}
</code></pre>
</section>

<section  class=""><h2 id="compiled-code-is-nice">Compiled code is nice</h2>
<pre><code class="lang-javascript">var person = &quot;hello&quot;;
function greet(who) {
    return &quot;hi &quot; + who;
}
// this will compile
console.log(greet(&quot;hi&quot;));
</code></pre>
</section>

<section  class=""><h2 id="exercise">Exercise</h2>
<pre><code>EXERCISES.md - typescript-vars
</code></pre></section>

<section data-state='title' class=" title"><h2 id="modules">Modules</h2>
</section>

<section  class=""><h2 id="uses-es6-modules-">Uses ES6 modules!</h2>
</section>

<section  class=""><h2 id="export">Export</h2>
<pre><code class="lang-typescript">// greetings.en.ts
export const informal = &quot;hi&quot;;
</code></pre>
</section>

<section  class=""><h2 id="import">Import</h2>
<pre><code class="lang-typescript">// run.js
import { informal } from &quot;./greetings.en&quot;;

console.log(informal + &quot; amy&quot;) // hi amy
</code></pre>
</section>

<section  class=""><h2 id="together">Together</h2>
<pre><code class="lang-typescript">// greetings.en.ts
export const informal = &quot;hi&quot;;
export function useful() {}
</code></pre>
<pre><code class="lang-typescript">// run.js
import { informal, useful } from &quot;./greetings.en&quot;;

console.log(informal + &quot; amy&quot;) // hi amy
</code></pre>
</section>

<section  class=""><h2 id="exercise">Exercise</h2>
<pre><code>EXERCISES.md - import-export
</code></pre></section>

<section data-state='title' class=" title"><h2 id="classes">Classes</h2>
</section>

<section  class=""><h2 id="es6-">ES6++</h2>
</section>

<section  class=""><h2 id="properties">Properties</h2>
<pre><code class="lang-typescript">export class Heading {
  level: number;
  text: string = &quot;default&quot;;
}

const header = new Heading();
header.text // &quot;default&quot;
</code></pre>
</section>

<section  class=""><h2 id="properties-in-constructor">Properties in constructor</h2>
<pre><code class="lang-typescript">export class Heading {
  constructor(public level: number, 
    public text: string) {
  }
}

const header = new Heading(2, &quot;hello&quot;);
header.level // 2
header.text // &quot;hello&quot;;
</code></pre>
</section>

<section  class=""><h2 id="methods">Methods</h2>
<pre><code class="lang-typescript">export class MarkdownHeading {
  //...

  render() {
    return `&lt;h${this.level}&gt;
      this.text
    &lt;/h${this.level}&gt;`;
  }
}

const header = new Heading(2, &quot;hello&quot;);
console.log(header.render()) // &quot;&lt;h2&gt;hello&lt;/h2&gt;&quot;
</code></pre>
</section>

<section  class=""><h2 id="exercise">Exercise</h2>
<pre><code>EXERCISES.md - classes
</code></pre></section>

<section data-state='title' class=" title"><h2 id="loading-typescript">Loading TypeScript</h2>
</section>

<section  class=""><h2 id="not-native">Not native</h2>
</section>

<section  class=""><h2 id="modules-not-native">Modules not native</h2>
<ul>
<li>stuck in browser vendor disputes</li>
</ul>
</section>

<section  class=""><h2 id="polyfill-to-the-rescue-">Polyfill to the rescue!</h2>
<pre><code class="lang-javascript">System.import(&#39;app/main&#39;)
.catch((e) =&gt; console.error(e.stack))
</code></pre>
</section>

<section  class=""><h2 id="config">Config</h2>
</section>

<section  class=""><h2 id="your-code">Your code</h2>
<pre><code class="lang-javascript">System.config({
  packages: {
    app: {
      format: &#39;register&#39;,
      defaultExtension: &#39;js&#39;
    },
  },
});
</code></pre>
</section>

<section  class=""><h2 id="external-modules">External modules</h2>
<pre><code class="lang-typescript">// importing from node_modules
import d3 from &quot;d3&quot;:

// powered by...
</code></pre>
<pre><code class="lang-javascript">// this config
System.config({
  map: {
    d3: &quot;node_modules/d3/d3.js&quot;,
  },
  meta: {
    &quot;node_modules/*&quot;: {
      defaultExtension: &#39;js&#39;,
      format: &quot;cjs&quot;
    }
  },
});
</code></pre>
</section>

<section data-state='title' class=" title"><h2 id="component-tree">Component Tree</h2>
</section>

<section  class=""><h2 id="apps-self-describing-tree-of-components">Apps = self-describing tree of components</h2>
</section>

<section  class=""><h2 id="self-describing-">Self-describing...</h2>
<ul>
<li>meta-data</li>
<li>can render itself</li>
<li>has own injector</li>
<li>defined public-API</li>
</ul>
</section>

<section  class=""><h2 id="-tree">...tree</h2>
<ul>
<li>hierarchical</li>
<li>smart components configure &#39;dumb&#39; rendering components</li>
</ul>
</section>

<section  class=""><h2 id="tree">Tree</h2>
<p><img src="img/component-tree.png" alt="component"></p>
</section>

<section  class=""><h2 id="child-components">Child components</h2>
<pre><code class="lang-typescript">import { Component } from &#39;@angular/core&#39;;
import { HelloComponent } from &#39;./HelloComponent&#39;;

@Component({
  // this is where we list additional directives
  directives: [HelloComponent],
  template: &#39;&lt;hello-angular&gt;&lt;/hello-angular&gt;&#39;,
})
</code></pre>
</section>

<section  class=""><h2 id="components-need-to-be-defined-to-be-used-in-template">Components need to be defined to be used in template</h2>
</section>

<section  class=""><h2 id="why-">Why?</h2>
</section>

<section  class=""><h2 id="keeps-components-statically-analysable">Keeps components statically analysable</h2>
<pre><code class="lang-html">import { Component } from &#39;@angular/core&#39;;
import { HelloComponent } from &#39;./HelloComponent&#39;;


@Component({
  // this is where we list additional directives
  directives: [HelloComponent],
  template: &#39;&lt;hello-angular&gt;&lt;/hello-angular&gt;&#39;,
})
</code></pre>
</section>

<section  class=""><h2 id="contrast">Contrast</h2>
<ul>
<li>directives per component</li>
<li>injector: flows down components</li>
</ul>
</section>

<section  class=""><h2 id="any-exceptions-">Any exceptions?</h2>
</section>

<section  class=""><h2 id="-platform_directives-"><code>PLATFORM_DIRECTIVES</code>!</h2>
<ul>
<li>would get old including them all the time!</li>
</ul>
</section>

<section  class=""><h2 id="exercise">Exercise</h2>
<pre><code>component-tree
</code></pre></section>

<section data-state='title' class=" title"><h2 id="data-driven-components">Data-driven components</h2>
</section>

<section  class=""><h2 id="goal">Goal</h2>
<ul>
<li>get data into our component!</li>
</ul>
</section>

<section  class=""><h2 id="data-down">Data-down</h2>
<p><img src="img/data-down.png" alt="data-down"></p>
</section>

<section  class=""><h2 id="data-in">Data in</h2>
<pre><code class="lang-html">&lt;product
  [product]=&quot;product&quot;
  ...
  &gt;
</code></pre>
</section>

<section  class=""><h2 id="data-in">Data in</h2>
<pre><code class="lang-typescript">import { Input } from &quot;@angular/core&quot;;

@Component({ /<em> ... </em>/ })
class DataControl {
  @Input() public categories: string[];

  ngOnChanges(changes) {
    // fired when input changes
  }
}
</code></pre>
</section>

<section  class=""><h2 id="exercise">Exercise</h2>
<pre><code>inputs
</code></pre></section>

<section data-state='title' class=" title"><h2 id="platform-directives">Platform directives</h2>
</section>

<section  class=""><h2 id="some-directives-are-provided-by-platform">Some directives are provided by platform</h2>
</section>

<section  class=""><h2 id="directives">Directives</h2>
<ul>
<li>don&#39;t have a template of their own</li>
<li>often just attributes - <code>&lt;div [hidden]=&#39;!isVisible()&#39;</code></li>
</ul>
</section>

<section  class=""><h2 id="built-in">Built-in</h2>
<ul>
<li>provided by browser-platform, server, NativeScript etc</li>
</ul>
</section>

<section  class=""><h2 id="-platform_directives-"><code>PLATFORM_DIRECTIVES</code></h2>
<ul>
<li><code><em>ngFor</code></li>
<li><code></em>ngIf</code></li>
<li>some useful attribute directives</li>
</ul>
</section>

<section  class=""><h2 id="-ngfor-"><code><em>ngFor</code></h2>
<pre><code class="lang-html">&lt;div </em>ngFor=&#39;let item of items&#39;
    &gt;
  {{ item.name }}
&lt;/div&gt;
</code></pre>
</section>

<section  class=""><h2 id="gotcha-1-">Gotcha 1:</h2>
<ul>
<li>spot the bug!</li>
</ul>
<pre><code class="lang-html">&lt;div *ngFor=&#39;let item in items&#39;
    &gt;
  {{ item.name }}
&lt;/div&gt;
</code></pre>
</section>

<section  class=""><h2 id="-ngforof-"><code>ngForOf</code></h2>
<ul>
<li><em>must</em> be <code>let ... of ...</code></li>
</ul>
<pre><code class="lang-html">&lt;div *ngFor=&#39;let item of items&#39;
    &gt;
  {{ item.name }}
&lt;/div&gt;
</code></pre>
</section>

<section  class=""><h2 id="gotcha-2-">Gotcha 2:</h2>
<ul>
<li>what&#39;s the bug?</li>
</ul>
<pre><code class="lang-html">&lt;div ngFor=&#39;let item of items&#39;
    &gt;
  {{ item.name }}
&lt;/div&gt;
</code></pre>
</section>

<section  class=""><h2 id="structural-directives-are-stars">Structural directives are stars</h2>
<ul>
<li><code><em></code> denotes something that works with element as template</li>
</ul>
<pre><code class="lang-html">&lt;div </em>ngFor=&#39;let item of items&#39;
    &gt;
  {{ item.name }}
&lt;/div&gt;
</code></pre>
</section>

<section  class=""><h2 id="gotcha-3">Gotcha 3</h2>
<pre><code class="lang-html">&lt;div *ngFor=&#39;item of items&#39;
    &gt;
  {{ item.name }}
&lt;/div&gt;
</code></pre>
</section>

<section  class=""><h2 id="must-use-let-">Must use <code>let</code></h2>
<pre><code class="lang-html">&lt;div *ngFor=&#39;let item of items&#39;
    &gt;
  {{ item.name }}
&lt;/div&gt;
</code></pre>
</section>

<section  class=""><h2 id="phew-">Phew!</h2>
</section>

<section  class=""><h2 id="must-use-let-">Must use <code>let</code></h2>
<pre><code class="lang-html">&lt;div *ngFor=&#39;let item of items&#39;
    &gt;
  {{ item.name }}
&lt;/div&gt;
</code></pre>
</section>

<section  class=""><h2 id="-ngif-is-easier"><code>ngIf</code> is easier</h2>
<ul>
<li>just remember the <code><em></code></li>
</ul>
<pre><code class="lang-html">&lt;div </em>ngIf=&#39;item&#39;
     &gt;
  {{ item.name }}
&lt;/div&gt;
</code></pre>
</section>

<section  class=""><h2 id="-ngif-use-case"><code>ngIf</code> use-case</h2>
<ul>
<li>creating/destroying large subtree</li>
<li>often you&#39;d prefer to show/hide via CSS</li>
</ul>
</section>

<section  class=""><h2 id="-class-directive"><code>[class]</code> directive</h2>
<ul>
<li><code>[class.someClass]=x</code> will add/remove <code>someClass</code></li>
<li>if x is truthy, will be present</li>
</ul>
<pre><code class="lang-html">&lt;div [class.concealed]=&#39;!item&#39;
     &gt;
  ...
&lt;/div&gt;
</code></pre>
</section>

<section  class=""><h2 id="-hidden-attribute"><code>[hidden]</code> attribute</h2>
<pre><code class="lang-html">&lt;div [hidden]=&#39;!item&#39;
     &gt;
  ...
&lt;/div&gt;
</code></pre>
</section>

<section  class=""><h2 id="exercise">Exercise</h2>
<pre><code>built-in-directives
</code></pre></section>

<section data-state='title' class=" title"><h2 id="stores">Stores</h2>
</section>

<section  class=""><h2 id="goal">Goal</h2>
<ul>
<li>load in product data</li>
</ul>
</section>

<section  class=""><h2 id="stores">Stores</h2>
</section>

<section  class=""><h2 id="abstract-persistence">Abstract persistence</h2>
<pre><code class="lang-typescript">class Checkout {
  checkout(http: Http) {
    this.http.post(&quot;/some/checkout&quot;)
  }
}
</code></pre>
</section>

<section  class=""><h2 id="why-">Why?</h2>
</section>

<section  class=""><h2 id="dry">DRY</h2>
<ul>
<li>one place to define persistence</li>
</ul>
</section>

<section  class=""><h2 id="low-coupling">Low-coupling</h2>
<ul>
<li>bad to couple many components to complex API details</li>
</ul>
</section>

<section  class=""><h2 id="testing">Testing</h2>
<ul>
<li>smaller API (e.g just promises) = easier to test</li>
</ul>
</section>

<section data-state='title' class=" title"><h2 id="services">Services</h2>
</section>

<section  class=""><h2 id="services-are-">Services are...</h2>
<ul>
<li>any code!</li>
</ul>
</section>

<section  class=""><h2 id="defining-a-service">Defining a service</h2>
<pre><code class="lang-typescript">import { Injectable } from &quot;@angular/core&quot;;

@Injectable()
export class ProductStore {
}
</code></pre>
</section>

<section  class=""><h2 id="-injectable-"><code>@Injectable()</code>?</h2>
<pre><code class="lang-typescript">import { Injectable } from &quot;@angular/core&quot;;

@Injectable()
...
</code></pre>
</section>

<section  class=""><h2 id="why-">Why?</h2>
</section>

<section  class=""><h2 id="well-">Well...</h2>
</section>

<section  class=""><h2 id="how-do-we-get-an-instance-">How do we get an instance?</h2>
<pre><code class="lang-typescript">  ngOnInit() {
    this.productStore.all()
      .then(products =&gt; 
        this.products = products);
  }
</code></pre>
</section>

<section  class=""><h2 id="dependency-injection">Dependency Injection</h2>
</section>

<section  class=""><h2 id="provide-store-to-app">Provide store to app</h2>
<pre><code class="lang-typescript">// App.component.ts
import { ProductStore } from &quot;./ProductStore&quot;;

@Component({
  // ...
  providers: [ProductStore, /* ... */],
})
</code></pre>
</section>

<section  class=""><h2 id="using">Using</h2>
<pre><code class="lang-typescript">import { ProductStore } from &quot;./ProductStore&quot;;

@Component(/* ... */)
export class ProductList {
  // we&#39;ll get an instance
  constructor(store: ProductStore) {
  }
}
</code></pre>
</section>

<section  class=""><h2 id="why-di-">Why DI?</h2>
</section>

<section  class=""><h2 id="two-benefits">Two benefits</h2>
</section>

<section  class=""><h2 id="one-testing">One: testing</h2>
</section>

<section  class=""><h2 id="two-pluggable-implementations">Two: pluggable implementations</h2>
</section>

<section  class=""><h2 id="hierarchical">Hierarchical</h2>
</section>

<section  class=""><h2 id="tree">Tree</h2>
<p><img src="img/injector-tree.png" alt="injector tree"></p>
</section>

<section data-state='notitle' class=" notitle"><h2 id="e-g">e.g</h2>
<pre><code class="lang-typescript">import { provide } from &#39;@angular/core&#39;;
import { ProductStore, ServerSideStore } from 
  &#39;./Product&#39;;

// provide a valid alternative implementation
// of ProductStore (server-side, stubbed, web-sockets...)
bootstrap(FrontPage, [
  provide(ProductStore, { 
    useClass: ServerSideStore,
  },
])
</code></pre>
</section>

<section  class=""><h2 id="use">Use</h2>
<pre><code class="lang-typescript">import { ProductStore } from &#39;./ProductStore&#39;;

class ProductList {
  // ...and components down the tree 
  // will get ServerSideStore not ProductStore!
  constructor(greeter: ProductStore) { 
  }
}
</code></pre>
</section>

<section  class=""><h2 id="first-parent-with-instance-wins">First parent with instance wins</h2>
</section>

<section  class=""><h2 id="-injectable-"><code>@Injectable()</code>?</h2>
<ul>
<li>Angular needs meta-data to be created</li>
<li>At least one decorator per service and you&#39;re ok</li>
</ul>
</section>

<section  class=""><h2 id="exercise">Exercise</h2>
<pre><code>stores
</code></pre></section>

<section data-state='title' class=" title"><h2 id="routing">Routing</h2>
</section>

<section  class=""><h2 id="structured">Structured</h2>
<p><img src="img/component-router.png" alt="component router"></p>
</section>

<section  class=""><h2 id="for-today-kiss">For today: KISS</h2>
</section>

<section  class=""><h2 id="define-routes">Define routes</h2>
<pre><code class="lang-typescript">import {Routes, ROUTER_DIRECTIVES} 
  from &#39;@angular/router&#39;;

@Routes([
  {
    path:&#39;/products/:id&#39;,
    component: ProductPage 
  },
  // ... more
])
@Component({
</code></pre>
</section>

<section  class=""><h2 id="define-where-routed-content-appears">Define where Routed content appears</h2>
<pre><code class="lang-typescript">import {Routes, ROUTER_DIRECTIVES} 
  from &#39;@angular/router&#39;;

@Component({
  directives: [ROUTER_DIRECTIVES],

  // here&#39;s where our routed component attaches
  template: &#39;&lt;router-outlet&gt;&lt;/router-outlet&gt;&#39;,
})
</code></pre>
</section>

<section  class=""><h2 id="why-are-routes-strings-">Why are routes strings?</h2>
</section>

<section  class=""><h2 id="lazy-loading">Lazy-loading</h2>
</section>

<section  class=""><h2 id="links">Links</h2>
<pre><code class="lang-typescript">import { ROUTER_DIRECTIVES, RouteConfig }
   from &quot;@angular/router&quot;;

@Component({
  selector: &quot;product-listing&quot;,
  directives: [ROUTER_DIRECTIVES],
  template: `
    &lt;h1&gt;Here are our products:&lt;/h1&gt;
    &lt;a [routerLink]=
      &quot;[&#39;/products&#39;, product.id]&quot;&gt;
      Router
    &lt;/a&gt;
  `
})
</code></pre>
</section>

<section data-state='title' class=" title"><h2 id="exercise">Exercise</h2>
<pre><code>routing
</code></pre></section>

<section data-state='title' class=" title"><h2 id="outputs">Outputs</h2>
</section>

<section  class=""><h2 id="we-ve-seen-data-down">We&#39;ve seen data-down</h2>
<p><img src="img/data-down.png" alt="data-down"></p>
</section>

<section  class=""><h2 id="now-events-up">Now events up</h2>
</section>

<section  class=""><h2 id="events-up">Events-up</h2>
<p><img src="img/events-up.png" alt="outputs"></p>
</section>

<section  class=""><h2 id="what-goes-up-">What goes up?</h2>
</section>

<section  class=""><h2 id="business-events">Business events</h2>
</section>

<section  class=""><h2 id="data-flow">Data-flow</h2>
<p><img src="img/data-flow.png" alt="outputs"></p>
</section>

<section  class=""><h2 id="events-up">Events up</h2>
<ul>
<li>via events</li>
</ul>
<pre><code class="lang-html">&lt;product
  (addToCart)=&quot;cart.add($event.product)&quot;
  ...
  &gt;
</code></pre>
</section>

<section  class=""><h2 id="abstracting">Abstracting</h2>
</section>

<section  class=""><h2 id="events">Events</h2>
<pre><code class="lang-typescript">import { EventEmitter, Output } from &quot;@angular/core&quot;;

@Component({ /<em> ... </em>/ })
class Product {
  @Output() filtered = new EventEmitter;

  filterChange() {
    // fires (filtered)=... expression
    this.filtered.emit({ product: this.product })
  }
}
</code></pre>
</section>

<section  class=""><h2 id="exercise">Exercise</h2>
<pre><code>outputs
</code></pre></section>

<section data-state='title' class=" title"><h2 id="forms">Forms</h2>
</section>

<section  class=""><h2 id="forms-have-lots-of-jobs">Forms have lots of jobs</h2>
</section>

<section  class=""><h2 id="capture-input">Capture input</h2>
</section>

<section  class=""><h2 id="validate">Validate</h2>
</section>

<section  class=""><h2 id="inform-user-of-result-of-transaction">Inform user of result of transaction</h2>
</section>

<section  class=""><h2 id="angular-s-forms-do-lots-for-you">Angular&#39;s forms do lots for you</h2>
</section>

<section  class=""><h2 id="two-ways-to-do-it">Two ways to do it</h2>
</section>

<section  class=""><h2 id="template-driven">Template-driven</h2>
<ul>
<li>lots of control</li>
</ul>
<pre><code class="lang-html">&lt;form #checkoutForm=&quot;ngForm&quot;
      (ngSubmit)=&quot;submitted(checkoutForm)&quot;
      &gt;
  &lt;input name=cardNumber
         ngModel
         required
         #number=&#39;ngForm&#39;
         &gt;
</code></pre>
</section>

<section  class=""><h2 id="model-driven">Model-driven</h2>
<ul>
<li>generate form from data-structure</li>
</ul>
<pre><code class="lang-typescript">this.loginForm = builder.group({
  login: [&quot;&quot;, Validators.required],
  passwordRetry: builder.group({
    password: [&quot;&quot;, Validators.required],
    passwordConfirmation: [&quot;&quot;, Validators.required, asyncValidator]
  })
});
</code></pre>
</section>

<section  class=""><h2 id="today-template-driven">Today: template driven</h2>
</section>

<section  class=""><h2 id="inputs">Inputs</h2>
<pre><code class="lang-html">&lt;input name=&quot;superName&quot;
       ngModel
       required
       &gt;
</code></pre>
</section>

<section  class=""><h2 id="name">Name</h2>
<ul>
<li>important: will be bound using this name by default</li>
</ul>
<pre><code class="lang-html">&lt;input name=&quot;superName&quot;
       ...
       &gt;
</code></pre>
</section>

<section  class=""><h2 id="-ngmodel-"><code>ngModel</code></h2>
<pre><code class="lang-html">&lt;input ...
       name=superName
       ngModel
       &gt;
</code></pre>
<pre><code class="lang-typescript">form.controls.superName // this is the ngModel instance
</code></pre>
</section>

<section  class=""><h2 id="validators">Validators</h2>
<ul>
<li>Angular supports HTML5 validators</li>
</ul>
<pre><code class="lang-html">&lt;input ...
       required
       &gt;
</code></pre>
</section>

<section  class=""><h2 id="using-validators">Using validators</h2>
<ul>
<li>we reference <code>ngModel</code> via... <code>ngForm</code>?!</li>
<li>bug - hopefully fixed in RC3</li>
</ul>
<pre><code class="lang-html">&lt;input ...
       #input=&#39;ngForm&#39;
       &gt;

&lt;span *ngIf=&#39;!input.valid&#39;&gt;
  Please fix your data! :(
&lt;/span&gt;
</code></pre>
</section>

<section  class=""><h2 id="-ngmodel-"><code>NgModel</code></h2>
<ul>
<li><code>.errors</code>  = object with keys as error name, boolean if present</li>
<li><code>.valid</code>   = is valid</li>
<li><code>.pristine</code> = has not been edited by user</li>
</ul>
</section>

<section  class=""><h2 id="-ngform-"><code>NgForm</code></h2>
<ul>
<li><code>.controls</code> = all the controls, with the <code>ngModel=someName</code> as name</li>
<li><code>.valid</code></li>
<li><code>.pristine</code></li>
<li><code>.form</code> - a <code>ControlGroup</code> for whole form - useful API</li>
</ul>
</section>

<section  class=""><h2 id="exercise">Exercise</h2>
<pre><code>forms
</code></pre></section>

<section data-state='title' class=" title"><h2 id="loading-data">Loading data</h2>
</section>

<section  class=""><h2 id="goal">Goal</h2>
<ul>
<li>load in Payment frontpage data</li>
<li>prepare</li>
</ul>
</section>

<section  class=""><h2 id="define">Define</h2>
<pre><code class="lang-typescript">import { Http } from &#39;@angular/http&#39;;

export class Payment {
    checkout() {
       return this.http.post(&#39;/some/payment/api&#39;);
    }
}
</code></pre>
</section>

<section  class=""><h2 id="but-">But...</h2>
</section>

<section  class=""><h2 id="how-do-we-get-an-instance-">How do we get an instance?</h2>
<pre><code class="lang-typescript">   return this.http.post(&#39;/some/payment/api&#39;);
</code></pre>
</section>

<section  class=""><h2 id="ask-for-it-">Ask for it!</h2>
<pre><code class="lang-typescript">import { Injectable } from &quot;@angular/core&quot;;
import { Http } from &quot;@angular/http&quot;;

@Injectable();
export class Payment {
  // this items deps will be looked up when
  // it&#39;s required
  constructor(private http: Http) {}
}
</code></pre>
</section>

<section  class=""><h2 id="dependency-injection">Dependency Injection</h2>
</section>

<section  class=""><h2 id="provide-http-to-app">Provide HTTP to app</h2>
<pre><code class="lang-typescript">// App.component.ts
import { HTTP_PROVIDERS } from &quot;@angular/http&quot;;

@Component({
  // ...
  providers: [HTTP_PROVIDERS /* ... */],
})
</code></pre>
</section>

<section  class=""><h2 id="using">Using</h2>
<pre><code class="lang-typescript">import { Payment } from &quot;./Payment.service&quot;;

@Component(/* ... */)
export class Checkout {
  // we&#39;ll get an instance
  constructor(payment: Payment) {
  }
}
</code></pre>
</section>

<section  class=""><h2 id="transform">Transform</h2>
<pre><code class="lang-typescript">import { Http } from &#39;@angular/http&#39;;
import { API_URL } from &#39;./constants&#39;;

@Injectable()
export class Payment {

    constructor(private http: Http, apiUrl: API_URL) {}

    checkout() {
       return this.http.get(this.apiUrl + &quot;/checkout&quot;)
         .toPromise()
         .then((resp) =&gt; {
            // response object allows us to control parsing
            // and transform into a different format
            const result = resp.json();
            return { successful: result.ok };
         })
    }
}
</code></pre>
</section>

<section  class=""><h2 id="exercise">Exercise</h2>
<pre><code>http
</code></pre></section>

<section data-state='title' class=" title"><h2 id="directives">Directives</h2>
</section>

<section  class=""><h2 id="most-general-type-of-component">Most general type of component</h2>
</section>

<section  class=""><h2 id="all-components-are-directives">All components are directives</h2>
<pre><code class="lang-sh">   Directive
      ^
      |
   Component
</code></pre>
</section>

<section  class=""><h2 id="components">Components</h2>
<ul>
<li>are directives with a template!</li>
</ul>
</section>

<section  class=""><h2 id="two-types-of-non-component-directive">Two types of non-component directive</h2>
<ul>
<li>attribute: modify existing tag or component</li>
<li>structural: change the DOM layout</li>
</ul>
</section>

<section data-state='title' class=" title"><h2 id="attribute-directives">Attribute directives</h2>
</section>

<section  class=""><h2 id="directives-decorator">Directives decorator</h2>
</section>

<section  class=""><h2 id="directives-have-a-selector">Directives have a selector</h2>
<ul>
<li>often going to be an attribute</li>
</ul>
<pre><code class="lang-typescript">import { Directive } from &quot;@angular/core&quot;;

@Directive({
  // the below is CSS 3 selector for attribute
  selector: &quot;[powerButton]&quot;
})
</code></pre>
</section>

<section  class=""><h2 id="directives-are-a-class">Directives are a class</h2>
<pre><code class="lang-typescript">@Directive({
  // ...
})
export class PowerButton {
}
</code></pre>
</section>

<section  class=""><h2 id="directives-have-life-cycle-hooks">Directives have life-cycle hooks</h2>
<pre><code class="lang-typescript">import { Directive, DoCheck } from &quot;@angular/core&quot;;

@Directive({
  // ...
})
export class PowerButton 
  implements DoCheck {

  ngDoCheck() {
  }
}
</code></pre>
</section>

<section  class=""><h2 id="how-do-we-style-current-element-">How do we style current element?</h2>
<ul>
<li>we have no template!</li>
</ul>
</section>

<section  class=""><h2 id="-host-"><code>host:</code></h2>
<ul>
<li>works for components too!</li>
</ul>
<pre><code class="lang-typescript">@Directive({
  host: {
    &#39;[class.animating]&#39;: &#39;clicked&#39;,
  },
})
export class PowerButton {
  clicked = false;
}
</code></pre>
</section>

<section  class=""><h2 id="host">Host</h2>
<ul>
<li>host = the host element of a directive/component</li>
</ul>
</section>

<section  class=""><h2 id="how-do-we-listen-to-events-">How do we listen to events?</h2>
</section>

<section  class=""><h2 id="same-syntax-different-place">Same syntax, different place</h2>
</section>

<section data-state='notitle' class=" notitle"><h2 id="-"> </h2>
<pre><code class="lang-typescript">@Directive({
  host: {
    // ...
    &#39;(click)&#39;: &#39;animate()&#39;,
    &#39;(animationend)&#39;: &#39;done()&#39;,
  },
})
export class PowerButton {
  animating = false;

  animate() {
    this.animating = true;
  }

  done() {
    this.animating = false;
  }
}
</code></pre>
</section>

<section  class=""><h2 id="styling">Styling</h2>
<ul>
<li>doesn&#39;t have a view, so no encapsulation</li>
<li>needs normal (external) styling, or inline</li>
</ul>
</section>

<section data-state='title' class=" title"><h2 id="exercise">Exercise</h2>
<pre><code>attribute-directives
</code></pre></section>

<section data-state='title' class=" title"><h2 id="structural-directives">Structural directives</h2>
</section>

<section  class=""><h2 id="creating-and-destroying-views">Creating and destroying views</h2>
</section>

<section  class=""><h2 id="uses-template-">Uses <code>&lt;template&gt;</code></h2>
<ul>
<li>HTML5 tag</li>
</ul>
<pre><code class="lang-html">&lt;template&gt;
  &lt;h1&gt;You won&#39;t see me!&lt;/h1&gt;
&lt;/template&gt;
</code></pre>
</section>

<section  class=""><h2 id="syntax-sugar">Syntax sugar</h2>
<pre><code class="lang-html">&lt;p *ngIf=&quot;condition&quot;&gt;
  Now you see me
&lt;/p&gt;

&lt;!-- long hand for the above --&gt;
&lt;template [ngIf]=&quot;condition&quot;&gt;
  &lt;p&gt;
   Now you see me
  &lt;/p&gt;
&lt;/template&gt;
</code></pre>
</section>

<section  class=""><h2 id="defining-unless-">Defining <code>Unless</code></h2>
<ul>
<li>opposite of <code>*ngIf</code></li>
</ul>
</section>

<section  class=""><h2 id="getting-reference-to-template">Getting reference to template</h2>
<ul>
<li>use <code>TemplateRef&lt;any&gt;</code></li>
<li>this is how we reference our <code>&lt;template&gt;</code></li>
</ul>
</section>

<section  class=""><h2 id="where-do-we-put-it-">Where do we put it?</h2>
</section>

<section  class=""><h2 id="-viewcontainerref-"><code>ViewContainerRef</code></h2>
<ul>
<li>this is where we slot in ng2 view content</li>
<li>vs manually modifying the DOM</li>
</ul>
</section>

<section  class=""><h2 id="just-somewhere-to-put-content">Just somewhere to put content</h2>
</section>

<section  class=""><h2 id="can-be-any-element">Can be any element</h2>
<pre><code class="lang-typescript">&lt;div #someDiv&gt;
&lt;/div&gt;

&lt;!-- content ends up as a sibling, not child --&gt;
</code></pre>
</section>

<section  class=""><h2 id="easiest-simply-use-our-directive-node">Easiest: simply use our directive node</h2>
</section>

<section  class=""><h2 id="-viewcontainerref-methods"><code>ViewContainerRef</code> methods</h2>
<ul>
<li><code>vcr.clear()</code> - clears</li>
<li><code>vcr.createEmbeddedView(...)</code> fills view with something</li>
</ul>
</section>

<section  class=""><h2 id="together">Together</h2>
<pre><code class="lang-typescript">this.vcr.createEmbeddedView(this.templateRef);
</code></pre>
</section>

<section  class=""><h2 id="full-directive">Full directive</h2>
</section>

<section  class=""><h2 id="what-type-of-selector-">What type of selector?</h2>
</section>

<section  class=""><h2 id="-unless-"><code>[unless]</code></h2>
</section>

<section  class=""><h2 id="we-need-to-take-a-property-to-toggle">We need to take a property to toggle</h2>
</section>

<section  class=""><h2 id="selector">Selector</h2>
<pre><code class="lang-typescript">import { Directive } from &quot;@angular/core&quot;;

@Directive({
  selector: &quot;[unless]&quot;,
})
export class Unless {
  // ...
}
</code></pre>
</section>

<section  class=""><h2 id="input">Input</h2>
<pre><code class="lang-typescript">import { /* ..., */ Input } from &quot;@angular/core&quot;;

@Directive({
  // ...
})
export class Unless {
  @Input() unless: any;
}
</code></pre>
</section>

<section  class=""><h2 id="inject">Inject</h2>
<pre><code class="lang-typescript">import {  /* ..., */
  ViewContainerRef, TemplateRef } 
  from &quot;@angular/core&quot;;

@Directive({
  // ...
})
export class Unless {
  constructor(
    private tpl: TemplateRef&lt;any&gt;,
    private view: ViewContainerRef
  ) {}
}
</code></pre>
</section>

<section  class=""><h2 id="listen-for-change">Listen for change</h2>
<pre><code class="lang-typescript">import { /* ..., */ Input } from &quot;@angular/core&quot;;

@Directive({
  // ...
})
export class Unless {
  ngOnChanges() {
    if(this.unless) {
      this.view.clear();
    } else {
      this.view.createEmbeddedView(this.tpl);
    }
  }
}
</code></pre>
</section>

<section data-state='title' class=" title"><h2 id="exercise">Exercise</h2>
<pre><code>structural-directives
</code></pre></section>

<section data-state='title' class=" title"><h2 id="component-relationships">Component relationships</h2>
</section>

<section  class=""><h2 id="we-can-do-lots-with-parent-children">We can do lots with parent/children</h2>
</section>

<section  class=""><h2 id="children-can-very-easily-get-parent">Children can very easily get parent</h2>
<pre><code class="lang-typescript">// simply looks up tree, to find parent
constructor(
  private parentComponent: SomeParentComponent ) {

}
</code></pre>
</section>

<section  class=""><h2 id="can-do-things-like-register-self">Can do things like register self</h2>
<pre><code class="lang-typescript">// simply looks up tree, to find parent
constructor(
  private parentComponent: SomeParentComponent ) {

}

ngAfterViewInit() {
  this.parentComponent.register(this);
}
</code></pre>
</section>

<section  class=""><h2 id="we-can-also-go-the-other-way">We can also go the other way</h2>
<pre><code>@Component({
  template: `
    &lt;custom-A&gt;&lt;/custom-A&gt;
    &lt;video #myVideo&gt;&lt;/video&gt;
    &lt;custom-B&gt;&lt;/custom-B&gt;
    &lt;custom-B&gt;&lt;/custom-B&gt;
  `,
})
class Parent {
  @ViewChild(CustomA) a: CustomA;
  @ViewChild(&#39;myVideo&#39;) vid: ElementRef;
  @ViewChildren(CustomB) bs: QueryList&lt;CustomB&gt;;
}
</code></pre></section>

<section  class=""><h2 id="component-instance-by-type">Component instance by type</h2>
<pre><code>@Component({
  template: `
    &lt;custom-A&gt;&lt;/custom-A&gt;
  `,
})
class Parent {
  @ViewChild(CustomA) a: CustomA;
}
</code></pre></section>

<section  class=""><h2 id="component-instance-by-local-var">Component instance by local var</h2>
<pre><code>@Component({
  template: `
    &lt;custom-A #myA&gt;&lt;/custom-A&gt;
  `,
})
class Parent {
  @ViewChild(&#39;myA&#39;) a: CustomA;
}
</code></pre></section>

<section  class=""><h2 id="single-native-element">Single native element</h2>
<pre><code>@Component({
  template: `
    &lt;video #myVideo&gt;&lt;/video&gt;
  `,
})
class Parent {
  @ViewChild(&#39;myVideo&#39;) vid: ElementRef;
}
</code></pre></section>

<section  class=""><h2 id="list-of-components">List of components</h2>
<pre><code>@Component({
  template: `
    &lt;custom-B&gt;&lt;/custom-B&gt;
    &lt;custom-B&gt;&lt;/custom-B&gt;
  `,
})
class Parent {
  @ViewChildren(CustomB) bs: QueryList&lt;CustomB&gt;;
}
</code></pre></section>

<section  class=""><h2 id="not-available-straight-away-">Not available straight away!</h2>
<pre><code>@Component({
  /// ...
})
class Parent {
  @ViewChild(CustomB) b: CustomB;

  constructor() {
    // boom!
    this.bs.someMethod();
  }
}
</code></pre></section>

<section  class=""><h2 id="wait-for-view-to-be-ready">Wait for view to be ready</h2>
<pre><code>@Component({
  /// ...
})
class Parent {
  @ViewChild(CustomB) b: CustomB;

  ngAfterViewInit() {
    // everything works :)
    this.bs.someMethod();
  }
}
</code></pre></section>

<section  class=""><h2 id="why-no-css-selectors-">Why no CSS selectors?</h2>
</section>

<section  class=""><h2 id="anything-host-specific-in-template">Anything host-specific in template</h2>
<ul>
<li>otherwise our component&#39;s <em>logic</em> would be host specific</li>
</ul>
</section>

<section  class=""><h2 id="these-are-all-view-relationships">These are all view relationships</h2>
<ul>
<li>view = template</li>
<li>stuff the component directly controls</li>
</ul>
</section>

<section  class=""><h2 id="we-can-also-wrap-external-content">We can also wrap external content</h2>
</section>

<section  class=""><h2 id="e-g-transform">e.g transform</h2>
<pre><code class="lang-html">&lt;!-- our component --&gt;
&lt;top-bar&gt;
  &lt;!-- here, someone using our component
       places their own content inside our 
      tag--&gt;
  &lt;main&gt;
    &lt;img src=&#39;./super-logo.png&#39;&gt;
  &lt;/main&gt;
  &lt;extra&gt;
    &lt;input type=search&gt;
  &lt;/extra&gt;
&lt;/top-bar&gt;
</code></pre>
</section>

<section  class=""><h2 id="into-">into:</h2>
<pre><code class="lang-html">&lt;top-bar class=&quot;top-bar&quot;&gt;
  &lt;div class=&quot;top-bar-left&quot;&gt;
    &lt;main&gt;
      &lt;img src=&#39;./super-logo.png&#39;&gt;
    &lt;/main&gt;
  &lt;/div&gt;
  &lt;!-- ... --&gt;
&lt;/top-bar&gt;
</code></pre>
</section>

<section  class=""><h2 id="use-ng-content-">Use <code>&lt;ng-content&gt;</code></h2>
<ul>
<li>ng2 version of n1 transclusion</li>
<li>multiple slots</li>
</ul>
</section>

<section  class=""><h2 id="e-g-ng-content-">e.g <code>&lt;ng-content</code></h2>
<pre><code>@Component({
  template: `
    &lt;div class=&quot;top-bar-left&quot;&gt;
      &lt;ng-content select=&#39;main&#39;&gt;&lt;/ng-content&gt;
    &lt;/div&gt;
    &lt;div class=&quot;top-bar-right&quot;&gt;
      &lt;ng-content select=&#39;extra&#39;&gt;&lt;/ng-content&gt;
    &lt;/div&gt;
  `,
})
</code></pre></section>

<section  class=""><h2 id="can-go-further">Can go further</h2>
</section>

<section  class=""><h2 id="tabs-example-reverse-it-so-parent-queries">Tabs example - reverse it so parent queries</h2>
<pre><code class="lang-html">&lt;tabs&gt;
  &lt;tab&gt;&lt;/tab&gt;
  &lt;tab&gt;&lt;/tab&gt;
  &lt;tab&gt;&lt;/tab&gt;
&lt;/tabs&gt;
</code></pre>
</section>

<section  class=""><h2 id="-contentchild-ren-"><code>ContentChild(ren)</code></h2>
<ul>
<li><code>Content(ren)</code> = in <em>their</em> template</li>
<li><code>ViewChild(ren)</code> = in <em>our</em> template</li>
</ul>
</section>

<section  class=""><h2 id="like-viewchild-lvar-or-type">Like <code>ViewChild</code>, lvar or type</h2>
<ul>
<li>no CSS</li>
</ul>
</section>

<section  class=""><h2 id="e-g">e.g</h2>
<pre><code class="lang-typescript">@Component({
  /// ...
})
class Tabs {
  @ViewChildren(Tab) tabs: QueryList&lt;Tab&gt;;
  active: Tab;

  ngAfterViewInit() {
    if(this.tabs.length &gt; 0) {
      this.active = this.tabs[0];
    }
  }
}
</code></pre>
</section>

<section  class=""><h2 id="we-can-also-ask-for-other-components">We can also ask for other components</h2>
</section>

<section  class=""><h2 id="via-read-t-">via <code>{read : T }</code></h2>
<ul>
<li>matches &#39;Tab&#39; predicate</li>
<li>asks for <code>TemplateRef</code> instead</li>
</ul>
<pre><code class="lang-typescript">@ContentChildren(Tab, { read: TemplateRef }) 
  tabTemplates: QueryList&lt;TemplateRef&lt;any&gt;&gt;;
</code></pre>
</section>

<section data-state='title' class=" title"><h2 id="exercises">Exercises</h2>
<p>  component-parent-children</p>
</section>

<section data-state='title' class=" title"><h2 id="rxjs">RxJS</h2>
</section>

<section  class=""><h2 id="reactive-programming">Reactive Programming</h2>
<p>Organising our code around reacting to changes</p>
</section>

<section  class=""><h2 id="vs-proactive">vs proactive</h2>
<ul>
<li>the default style</li>
<li>We <em>make</em> changes to others in response</li>
<li>dependencies fulfilled in producer (writer)</li>
</ul>
<p><img src="img/proactive.png" alt="img"></p>
</section>

<section  class=""><h2 id="proactive-code">Proactive code</h2>
<pre><code class="lang-typescript">class ParentWidget {
  main() {
    dataSource.get(function(response) {
      this.childWidget.data = response;
    });
  }
}
</code></pre>
</section>

<section  class=""><h2 id="reactive">Reactive</h2>
<ul>
<li>We encode the logic of data-flow into streams</li>
<li>Clear where our dependencies lie in consumer (reader)</li>
</ul>
<p><img src="img/reactive.png" alt="img"></p>
</section>

<section  class=""><h2 id="reactive-code">Reactive code</h2>
<pre><code class="lang-typescript">class ChildWdiget {
  main() {
    this.data = this.parent.dataSource.subscribe();
  }
}
</code></pre>
</section>

<section  class=""><h2 id="rxjs">RxJS</h2>
<ul>
<li>&#39;programming with observable streams&#39;</li>
<li>so our reactions are subscribing to streams</li>
</ul>
</section>

<section  class=""><h2 id="big-idea">Big idea</h2>
<ul>
<li>Everything is a stream!</li>
<li>We do lots of turning stream A into stream B</li>
<li>and a little of subscribing to a stream and doing stuff (side-effects)</li>
</ul>
</section>

<section  class=""><h2 id="lots-of-integration-points-into-angular">Lots of integration points into Angular</h2>
</section>

<section  class=""><h2 id="forms-changing">Forms changing</h2>
<pre><code class="lang-typecript">this.form.valueChanges
</code></pre>
</section>

<section  class=""><h2 id="http">HTTP</h2>
<ul>
<li>requests are Observables</li>
</ul>
</section>

<section  class=""><h2 id="importing">Importing</h2>
</section>

<section  class=""><h2 id="rxjs-is-huge-">RxJS is huge!</h2>
<ul>
<li>so each bit imported on its own</li>
</ul>
<pre><code class="lang-typescript">import &quot;rxjs/add/operator/map&quot;;
</code></pre>
</section>

<section  class=""><h2 id="today-we-don-t-care">Today we don&#39;t care</h2>
<pre><code class="lang-typescript">// all the fun things! :)
import &quot;rxjs/Rx&quot;;
</code></pre>
</section>

<section  class=""><h2 id="so-">So!</h2>
</section>

<section  class=""><h2 id="-observable-"><code>Observable</code></h2>
<ul>
<li>this is the main abstraction</li>
</ul>
</section>

<section  class=""><h2 id="observables-can-be-subscribed-to">Observables can be subscribed to</h2>
</section>

<section  class=""><h2 id="subscribing">Subscribing</h2>
<pre><code class="lang-typescript">export class SomeComponent {
  @ViewQuery(Child) child: Child;

  ngAfterViewInit() {
    this.child.output
      .subscribe(e =&gt; {
        // we will see events come out
        console.log(e);
      })
  }
}
</code></pre>
</section>

<section  class=""><h2 id="but-ideally-we-transform-them-">But, ideally we transform them!</h2>
</section>

<section  class=""><h2 id="transform">Transform</h2>
<pre><code class="lang-typescript">export class SomeComponent {
  @ViewQuery(Child) child: Child;

  ngAfterViewInit() {
    this.child.output
      .map(e =&gt;
        new DifferentEvent(e, this.extraData()))
  }

  private extraData() {
    // some additional data from this component
  }
}
</code></pre>
</section>

<section  class=""><h2 id="we-create-streams-from-streams">We create streams from streams</h2>
</section>

<section  class=""><h2 id="via-operators">Via operators</h2>
<p><img src="img/rx-map.png" alt="map"></p>
</section>

<section  class=""><h2 id="rxjs-has-many">RxJS has many</h2>
</section>

<section  class=""><h2 id="let-s-open-rxmarbles">Let&#39;s open RxMarbles</h2>
</section>

<section  class=""><h2 id="operators-for-combining">Operators for combining</h2>
<ul>
<li><code>combineLatest</code></li>
</ul>
</section>

<section  class=""><h2 id="operators-for-transforming">Operators for transforming</h2>
<ul>
<li><code>map</code>, <code>scan</code></li>
</ul>
</section>

<section  class=""><h2 id="operators-for-dropping">Operators for dropping</h2>
<ul>
<li><code>debouce</code>, <code>distinctUntilChanged</code></li>
</ul>
</section>

<section  class=""><h2 id="exercise">Exercise</h2>
<p>  rxjs</p>
</section>

<section data-state='title' class=" title"><h2 id="using-libraries">Using libraries</h2>
</section>

<section  class=""><h2 id="ng2-isn-t-own-world">NG2 isn&#39;t own world</h2>
</section>

<section  class=""><h2 id="can-use-other-libs-">Can use other libs!</h2>
</section>

<section  class=""><h2 id="e-g-d3">e.g D3</h2>
</section>

<section data-state='title' class=" title"><h2 id="using-with-d3">Using with D3</h2>
</section>

<section  class=""><h2 id="goal">Goal</h2>
<ul>
<li>write D3 again!</li>
<li>get data from NG to d3</li>
</ul>
</section>

<section  class=""><h2 id="write-a-graph">Write a graph</h2>
<ul>
<li>this bit: identical, but with DI</li>
</ul>
<pre><code class="lang-typescript">import { Injectable } from &quot;@angular/core&quot;;
import d3 from &quot;d3&quot;;

@Injectable()
class Graph {
  render({ el: SVGElement, data: any[] }) {
    d3.select(el)
      // ...
  }
}
</code></pre>
</section>

<section  class=""><h2 id="angular-hides-the-dom">Angular hides the DOM</h2>
</section>

<section  class=""><h2 id="d3-needs-the-dom">D3 needs the DOM</h2>
<pre><code class="lang-typescript">render({ el: SVGElement, data: any[] }) {
</code></pre>
</section>

<section  class=""><h2 id="how-">How?</h2>
</section>

<section  class=""><h2 id="-elementref-"><code>ElementRef</code></h2>
<pre><code class="lang-typescript">import {ElementRef, Component} from &#39;@angular/core&#39;;
import { Graph } from &quot;./Graph.service&quot;;

@Component({
  // ...
})
export class Chart {
  constructor(private el: ElementRef, 
    private graph: Graph) {
  }
  ngOnChanges() {
    this.graph.render({
      // aha! the DOM returns...
      el: this.el &amp;&amp; this.el.nativeElement,
      data: /// ...
    })
  }
}
</code></pre>
</section>

<section  class=""><h2 id="exercise">Exercise</h2>
<pre><code>d3
</code></pre></section>

<section  class=""><h2 id="thanks-">Thanks!</h2>
<p><a href="https://twitter.com/timruffles">@timruffles</a></p>
</section>

</div>
</div>

<!-- demo code -->
<script src="js/jquery.js"></script>
<script src="js/lodash.js"></script>
<script src="js/angular.js"></script>

<!-- live coding -->
<script src=js/little-console.js></script>
<script src=js/showConsoles.js></script>

<!-- reveal -->
<script src="reveal/lib/js/head.min.js"></script>
<script src="reveal/plugin/highlight/highlight.js"></script>
<script src="reveal/js/reveal.js"></script>
<script src="js/revealConfig.js"></script>

</body>
